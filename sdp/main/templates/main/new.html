<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script>
		function getCookie(name) {
			var cookieValue = null;
			if (document.cookie && document.cookie !== '') {
				var cookies = document.cookie.split(';');
				for (var i = 0; i < cookies.length; i++) {
					var cookie = jQuery.trim(cookies[i]);
					// Does this cookie string begin with the name we want?
					if (cookie.substring(0, name.length + 1) === (name + '=')) {
						cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
						break;
					}
				}
			}
			return cookieValue;
		}
	
		$(document).ready(function() {
			$(".moduleLoad").click(function(){
				var csrftoken = getCookie('csrftoken');
				$.ajax({
					method: "POST",
					url: "loadComponents/",
					beforeSend: function( xhr ) {
						xhr.setRequestHeader("X-CSRFToken", csrftoken);
					},
					data: {module_id: this.id, course_id: {{course_id}} }
				}).done(function( msg ) {
					$("#compContainer").html(msg);
				});
			});	

			$("#addMod").click(function(){
				
				var csrftoken = getCookie('csrftoken');
				$.ajax({
					method: "POST",
					url: "add_module/",
					beforeSend: function( xhr ) {
						xhr.setRequestHeader("X-CSRFToken", csrftoken);
					},
					data: {module_id: this.id, course_id: {{course_id}}, module_name: $("#module_name").val() }
				}).done(function( msg ) {
					$("#moduleContainer").html(msg);
				});
			});				
		});
	</script>
</head>

<body>
	<form action="{% url 'instructor' %}" method="post">
		{% csrf_token %}
		<label for="courseName">Course Name: </label>
		<input type="text" name="courseName" id="courseName"/>
		</br></br>
		
		<label for="courseDesc">Course Description: </label>
		<input type="text" name="courseDesc" id="courseDesc"/>
		</br></br>
		{% for category in categories %}
			<input type="radio" name="category" id="category{{ forloop.counter }}" value="{{ category.id }}" />
			<label for="category{{ forloop.counter }}">{{ category.name }}</label><br />
		{% endfor %}
		
		</br>
		
		<div id="moduleContainer">
			{% for module in modules %}
				<a href="#" class="moduleLoad" id="{{ module.id }}">{{ module.name }}</a></br>
			{% endfor %}
		</div></br>
		<input type="text" placeholder="enter the module name" name ="module_name" id="module_name" />
		<a href="#" id="addMod"/>Add Module</a></br></br>
	
		<div id="compContainer"></div></br>
		
		<input type="submit" value="Add Course" />
	</form>
</body>

